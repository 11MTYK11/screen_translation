<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WinMerge File Compare Report</title>
<style type="text/css">
<!--
table {margin: 0; border: 1px solid #a0a0a0; box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.15);}
td,th {word-break: break-all; font-size: 12pt;padding: 0 3px;}
tr { vertical-align: top; }
.title {color: white; background-color: blue; vertical-align: top; padding: 4px 4px; background: linear-gradient(mediumblue, darkblue);}
.sf3b2 {color: #000000; background-color: #ffffff; }
.sf3b5 {color: #000000; background-color: #0078d7; }
.sf3b14 {color: #000000; background-color: #ffa0a0; }
.sf3b16 {color: #000000; background-color: #f1e2ad; }
.sf3b18 {color: #000000; background-color: #ffaa82; }
.sf3b19 {color: #000000; background-color: #c8816c; }
.sf6b2 {color: #ffffff; background-color: #ffffff; }
.sf6b5 {color: #ffffff; background-color: #0078d7; }
.sf6b14 {color: #ffffff; background-color: #ffa0a0; }
.sf6b16 {color: #ffffff; background-color: #f1e2ad; }
.sf6b18 {color: #ffffff; background-color: #ffaa82; }
.sf6b19 {color: #ffffff; background-color: #c8816c; }
.sf7b2 {color: #0000ff; background-color: #ffffff; font-weight: bold; }
.sf7b5 {color: #0000ff; background-color: #0078d7; font-weight: bold; }
.sf7b14 {color: #0000ff; background-color: #ffa0a0; font-weight: bold; }
.sf7b16 {color: #0000ff; background-color: #f1e2ad; font-weight: bold; }
.sf7b18 {color: #0000ff; background-color: #ffaa82; font-weight: bold; }
.sf7b19 {color: #0000ff; background-color: #c8816c; font-weight: bold; }
.sf8b2 {color: #800080; background-color: #ffffff; }
.sf8b5 {color: #800080; background-color: #0078d7; }
.sf8b14 {color: #800080; background-color: #ffa0a0; }
.sf8b16 {color: #800080; background-color: #f1e2ad; }
.sf8b18 {color: #800080; background-color: #ffaa82; }
.sf8b19 {color: #800080; background-color: #c8816c; }
.sf9b2 {color: #008000; background-color: #ffffff; }
.sf9b5 {color: #008000; background-color: #0078d7; }
.sf9b14 {color: #008000; background-color: #ffa0a0; }
.sf9b16 {color: #008000; background-color: #f1e2ad; }
.sf9b18 {color: #008000; background-color: #ffaa82; }
.sf9b19 {color: #008000; background-color: #c8816c; }
.sf10b2 {color: #ff0000; background-color: #ffffff; }
.sf10b5 {color: #ff0000; background-color: #0078d7; }
.sf10b14 {color: #ff0000; background-color: #ffa0a0; }
.sf10b16 {color: #ff0000; background-color: #f1e2ad; }
.sf10b18 {color: #ff0000; background-color: #ffaa82; }
.sf10b19 {color: #ff0000; background-color: #c8816c; }
.sf11b2 {color: #606060; background-color: #ffffff; }
.sf11b5 {color: #606060; background-color: #0078d7; }
.sf11b14 {color: #606060; background-color: #ffa0a0; }
.sf11b16 {color: #606060; background-color: #f1e2ad; }
.sf11b18 {color: #606060; background-color: #ffaa82; }
.sf11b19 {color: #606060; background-color: #c8816c; }
.sf12b2 {color: #800000; background-color: #ffffff; }
.sf12b5 {color: #800000; background-color: #0078d7; }
.sf12b14 {color: #800000; background-color: #ffa0a0; }
.sf12b16 {color: #800000; background-color: #f1e2ad; }
.sf12b18 {color: #800000; background-color: #ffaa82; }
.sf12b19 {color: #800000; background-color: #c8816c; }
.sf13b2 {color: #0080c0; background-color: #ffffff; }
.sf13b5 {color: #0080c0; background-color: #0078d7; }
.sf13b14 {color: #0080c0; background-color: #ffa0a0; }
.sf13b16 {color: #0080c0; background-color: #f1e2ad; }
.sf13b18 {color: #0080c0; background-color: #ffaa82; }
.sf13b19 {color: #0080c0; background-color: #c8816c; }
.sf15b2 {color: #000000; background-color: #ffffff; }
.sf15b5 {color: #000000; background-color: #0078d7; }
.sf15b14 {color: #000000; background-color: #ffa0a0; }
.sf15b16 {color: #000000; background-color: #f1e2ad; }
.sf15b18 {color: #000000; background-color: #ffaa82; }
.sf15b19 {color: #000000; background-color: #c8816c; }
.sf17b2 {color: #000000; background-color: #ffffff; }
.sf17b5 {color: #000000; background-color: #0078d7; }
.sf17b14 {color: #000000; background-color: #ffa0a0; }
.sf17b16 {color: #000000; background-color: #f1e2ad; }
.sf17b18 {color: #000000; background-color: #ffaa82; }
.sf17b19 {color: #000000; background-color: #c8816c; }
.sf20b2 {color: #000080; background-color: #ffffff; }
.sf20b5 {color: #000080; background-color: #0078d7; }
.sf20b14 {color: #000080; background-color: #ffa0a0; }
.sf20b16 {color: #000080; background-color: #f1e2ad; }
.sf20b18 {color: #000080; background-color: #ffaa82; }
.sf20b19 {color: #000080; background-color: #c8816c; }
.sf21b2 {color: #0080c0; background-color: #ffffff; }
.sf21b5 {color: #0080c0; background-color: #0078d7; }
.sf21b14 {color: #0080c0; background-color: #ffa0a0; }
.sf21b16 {color: #0080c0; background-color: #f1e2ad; }
.sf21b18 {color: #0080c0; background-color: #ffaa82; }
.sf21b19 {color: #0080c0; background-color: #c8816c; }
.sf3b2i {color: #ababab; background-color: #ffffff; }
.sf3b5i {color: #005190; background-color: #0078d7; }
.sf3b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf3b16i {color: #a19774; background-color: #f1e2ad; }
.sf3b18i {color: #ab7257; background-color: #ffaa82; }
.sf3b19i {color: #865749; background-color: #c8816c; }
.sf6b2i {color: #ffffff; background-color: #ffffff; }
.sf6b5i {color: #54a4e4; background-color: #0078d7; }
.sf6b14i {color: #ffbfbf; background-color: #ffa0a0; }
.sf6b16i {color: #f5ebc8; background-color: #f1e2ad; }
.sf6b18i {color: #ffc6ab; background-color: #ffaa82; }
.sf6b19i {color: #daaa9c; background-color: #c8816c; }
.sf7b2i {color: #ababff; background-color: #ffffff; font-weight: bold; }
.sf7b5i {color: #0051e4; background-color: #0078d7; font-weight: bold; }
.sf7b14i {color: #ab6bbf; background-color: #ffa0a0; font-weight: bold; }
.sf7b16i {color: #a197c8; background-color: #f1e2ad; font-weight: bold; }
.sf7b18i {color: #ab72ab; background-color: #ffaa82; font-weight: bold; }
.sf7b19i {color: #86579c; background-color: #c8816c; font-weight: bold; }
.sf8b2i {color: #d5abd5; background-color: #ffffff; }
.sf8b5i {color: #2a51bb; background-color: #0078d7; }
.sf8b14i {color: #d56b96; background-color: #ffa0a0; }
.sf8b16i {color: #cc979f; background-color: #f1e2ad; }
.sf8b18i {color: #d57282; background-color: #ffaa82; }
.sf8b19i {color: #b15772; background-color: #c8816c; }
.sf9b2i {color: #abd5ab; background-color: #ffffff; }
.sf9b5i {color: #007a90; background-color: #0078d7; }
.sf9b14i {color: #ab966b; background-color: #ffa0a0; }
.sf9b16i {color: #a1c274; background-color: #f1e2ad; }
.sf9b18i {color: #ab9d57; background-color: #ffaa82; }
.sf9b19i {color: #868149; background-color: #c8816c; }
.sf10b2i {color: #ffabab; background-color: #ffffff; }
.sf10b5i {color: #545190; background-color: #0078d7; }
.sf10b14i {color: #ff6b6b; background-color: #ffa0a0; }
.sf10b16i {color: #f59774; background-color: #f1e2ad; }
.sf10b18i {color: #ff7257; background-color: #ffaa82; }
.sf10b19i {color: #da5749; background-color: #c8816c; }
.sf11b2i {color: #cbcbcb; background-color: #ffffff; }
.sf11b5i {color: #1f71b0; background-color: #0078d7; }
.sf11b14i {color: #cb8b8b; background-color: #ffa0a0; }
.sf11b16i {color: #c1b794; background-color: #f1e2ad; }
.sf11b18i {color: #cb9277; background-color: #ffaa82; }
.sf11b19i {color: #a67769; background-color: #c8816c; }
.sf12b2i {color: #d5abab; background-color: #ffffff; }
.sf12b5i {color: #2a5190; background-color: #0078d7; }
.sf12b14i {color: #d56b6b; background-color: #ffa0a0; }
.sf12b16i {color: #cc9774; background-color: #f1e2ad; }
.sf12b18i {color: #d57257; background-color: #ffaa82; }
.sf12b19i {color: #b15749; background-color: #c8816c; }
.sf13b2i {color: #abd5eb; background-color: #ffffff; }
.sf13b5i {color: #007ad0; background-color: #0078d7; }
.sf13b14i {color: #ab96aa; background-color: #ffa0a0; }
.sf13b16i {color: #a1c2b3; background-color: #f1e2ad; }
.sf13b18i {color: #ab9d96; background-color: #ffaa82; }
.sf13b19i {color: #868187; background-color: #c8816c; }
.sf15b2i {color: #ababab; background-color: #ffffff; }
.sf15b5i {color: #005190; background-color: #0078d7; }
.sf15b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf15b16i {color: #a19774; background-color: #f1e2ad; }
.sf15b18i {color: #ab7257; background-color: #ffaa82; }
.sf15b19i {color: #865749; background-color: #c8816c; }
.sf17b2i {color: #ababab; background-color: #ffffff; }
.sf17b5i {color: #005190; background-color: #0078d7; }
.sf17b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf17b16i {color: #a19774; background-color: #f1e2ad; }
.sf17b18i {color: #ab7257; background-color: #ffaa82; }
.sf17b19i {color: #865749; background-color: #c8816c; }
.sf20b2i {color: #ababd5; background-color: #ffffff; }
.sf20b5i {color: #0051bb; background-color: #0078d7; }
.sf20b14i {color: #ab6b96; background-color: #ffa0a0; }
.sf20b16i {color: #a1979f; background-color: #f1e2ad; }
.sf20b18i {color: #ab7282; background-color: #ffaa82; }
.sf20b19i {color: #865772; background-color: #c8816c; }
.sf21b2i {color: #abd5eb; background-color: #ffffff; }
.sf21b5i {color: #007ad0; background-color: #0078d7; }
.sf21b14i {color: #ab96aa; background-color: #ffa0a0; }
.sf21b16i {color: #a1c2b3; background-color: #f1e2ad; }
.sf21b18i {color: #ab9d96; background-color: #ffaa82; }
.sf21b19i {color: #868187; background-color: #c8816c; }
.ln {text-align: right; word-break: normal; color: #000000; background-color: #f0f0f0;}
-->
</style>
</head>
<body>
<table cellspacing="0" cellpadding="0" style="width:100%;">
<thead>
<tr>
<th colspan="2" class="title" style="width:50.000000%">gdown\download.py</th>
<th colspan="2" class="title" style="width:50.000000%">gdown_mine\download.py</th>
</tr>
</thead>
<tbody>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">from</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">__future__</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">print_function</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">from</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">__future__</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">print_function</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">json</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">json</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">os</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">os</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf20b2">path</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf20b2">path</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">re</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">re</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">shutil</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">shutil</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sys</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sys</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tempfile</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tempfile</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">textwrap</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">textwrap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">time</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">time</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">requests</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">requests</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">six</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">six</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tqdm</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tqdm</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">from</span><span class="sf11b2">&nbsp;.</span><span class="sf3b2">parse_url</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">parse_url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">from</span><span class="sf11b2">&nbsp;.</span><span class="sf3b2">parse_url</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">import</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">parse_url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">CHUNK_SIZE</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">512</span><span class="sf11b2">&nbsp;* </span><span class="sf10b2">1024</span><span class="sf11b2">&nbsp; </span><span class="sf9b2"># 512KB</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">CHUNK_SIZE</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">512</span><span class="sf11b2">&nbsp;* </span><span class="sf10b2">1024</span><span class="sf11b2">&nbsp; </span><span class="sf9b2"># 512KB</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">home</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">expanduser</span><span class="sf11b2">(</span><span class="sf12b2">"~"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">home</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">expanduser</span><span class="sf11b2">(</span><span class="sf12b2">"~"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">hasattr</span><span class="sf11b2">(</span><span class="sf3b2">textwrap</span><span class="sf11b2">, </span><span class="sf12b2">"indent"</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">hasattr</span><span class="sf11b2">(</span><span class="sf3b2">textwrap</span><span class="sf11b2">, </span><span class="sf12b2">"indent"</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">indent_func</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">textwrap</span><span class="sf11b2">.</span><span class="sf3b2">indent</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">indent_func</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">textwrap</span><span class="sf11b2">.</span><span class="sf3b2">indent</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">indent_func</span><span class="sf11b2">(</span><span class="sf3b2">text</span><span class="sf11b2">, </span><span class="sf3b2">prefix</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">indent_func</span><span class="sf11b2">(</span><span class="sf3b2">text</span><span class="sf11b2">, </span><span class="sf3b2">prefix</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">prefixed_lines</span><span class="sf11b2">():</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">prefixed_lines</span><span class="sf11b2">():</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">text</span><span class="sf11b2">.</span><span class="sf8b2">splitlines</span><span class="sf11b2">(</span><span class="sf20b2">True</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">text</span><span class="sf11b2">.</span><span class="sf8b2">splitlines</span><span class="sf11b2">(</span><span class="sf20b2">True</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">yield</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">prefix</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">.</span><span class="sf8b2">strip</span><span class="sf11b2">() </span><span class="sf7b2">else</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">yield</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">prefix</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">.</span><span class="sf8b2">strip</span><span class="sf11b2">() </span><span class="sf7b2">else</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf12b2">""</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf8b2">prefixed_lines</span><span class="sf11b2">())</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf12b2">""</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf8b2">prefixed_lines</span><span class="sf11b2">())</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">get_url_from_gdrive_confirmation</span><span class="sf11b2">(</span><span class="sf3b2">conten<wbr>ts</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">get_url_from_gdrive_confirmation</span><span class="sf11b2">(</span><span class="sf3b2">conten<wbr>ts</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">""</span>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">""</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">contents</span><span class="sf11b2">.</span><span class="sf8b2">splitlines</span><span class="sf11b2">():</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">line</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">contents</span><span class="sf11b2">.</span><span class="sf8b2">splitlines</span><span class="sf11b2">():</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf3b2">r</span><span class="sf11b2">'</span><span class="sf3b2">href</span><span class="sf11b2">=</span><span class="sf12b2">"(\/uc\?export=downloa<wbr>d[^"</span><span class="sf11b2">]+)</span><span class="sf12b2">', line)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf3b2">r</span><span class="sf11b2">'</span><span class="sf3b2">href</span><span class="sf11b2">=</span><span class="sf12b2">"(\/uc\?export=downloa<wbr>d[^"</span><span class="sf11b2">]+)</span><span class="sf12b2">', line)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">"https://docs.google.com"</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">"https://docs.google.com"</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"&amp;amp;"</span><span class="sf11b2">, </span><span class="sf12b2">"&amp;"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"&amp;amp;"</span><span class="sf11b2">, </span><span class="sf12b2">"&amp;"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">"confirm=([^;&amp;]+)"</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">"confirm=([^;&amp;]+)"</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">confirm</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">confirm</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">sub</span><span class="sf11b2">(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">sub</span><span class="sf11b2">(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">r</span><span class="sf12b2">"confirm=([^;&amp;]+)"</span><span class="sf11b2">, </span><span class="sf3b2">r</span><span class="sf12b2">"confirm={}"</span><span class="sf11b2">.</span><span class="sf8b2">format</span><span class="sf11b2">(</span><span class="sf3b2">confirm</span><span class="sf11b2">), </span><span class="sf3b2">url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">r</span><span class="sf12b2">"confirm=([^;&amp;]+)"</span><span class="sf11b2">, </span><span class="sf3b2">r</span><span class="sf12b2">"confirm={}"</span><span class="sf11b2">.</span><span class="sf8b2">format</span><span class="sf11b2">(</span><span class="sf3b2">confirm</span><span class="sf11b2">), </span><span class="sf3b2">url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'"downloadUrl":"([^"]+)'</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'"downloadUrl":"([^"]+)'</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"\\u003d"</span><span class="sf11b2">, </span><span class="sf12b2">"="</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"\\u003d"</span><span class="sf11b2">, </span><span class="sf12b2">"="</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"\\u0026"</span><span class="sf11b2">, </span><span class="sf12b2">"&amp;"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span><span class="sf11b2">.</span><span class="sf8b2">replace</span><span class="sf11b2">(</span><span class="sf12b2">"\\u0026"</span><span class="sf11b2">, </span><span class="sf12b2">"&amp;"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'&lt;p class="uc-error-subcaption"&gt;(.*)&lt;/p&gt;'</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'&lt;p class="uc-error-subcaption"&gt;(.*)&lt;/p&gt;'</span><span class="sf11b2">, </span><span class="sf3b2">line</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">m</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">raise</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">RuntimeError</span><span class="sf11b2">(</span><span class="sf3b2">error</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">raise</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">RuntimeError</span><span class="sf11b2">(</span><span class="sf3b2">error</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">download</span><span class="sf11b2">(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf7b2">def</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">download</span><span class="sf11b2">(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">, </span><span class="sf3b2">output</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">quiet</span><span class="sf11b2">=</span><span class="sf20b2">False</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">speed</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">use_cookies</span><span class="sf11b2">=</span><span class="sf20b2">True</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">, </span><span class="sf3b2">output</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">quiet</span><span class="sf11b2">=</span><span class="sf20b2">False</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">speed</span><span class="sf11b2">=</span><span class="sf20b2">None</span><span class="sf11b2">, </span><span class="sf3b2">use_cookies</span><span class="sf11b2">=</span><span class="sf20b2">True</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf12b2">"""Download file from URL.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf12b2">"""Download file from URL.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">Parameters</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">Parameters</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; ----------</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; ----------</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">URL</span><span class="sf11b2">. </span><span class="sf3b2">Google</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">Drive</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">URL</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">also</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">supported</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">URL</span><span class="sf11b2">. </span><span class="sf3b2">Google</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">Drive</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">URL</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">also</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">supported</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">: </span><span class="sf3b2">str</span><span class="sf11b2">, </span><span class="sf3b2">optional</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">: </span><span class="sf3b2">str</span><span class="sf11b2">, </span><span class="sf3b2">optional</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Output</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">filename</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">basename</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">of</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">URL</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Output</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">filename</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">basename</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">of</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">URL</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">quiet</span><span class="sf11b2">: </span><span class="sf3b2">bool</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">quiet</span><span class="sf11b2">: </span><span class="sf3b2">bool</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Suppress</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">terminal</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">False</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Suppress</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">terminal</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">False</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">proxy</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">proxy</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Proxy</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Proxy</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">speed</span><span class="sf11b2">: </span><span class="sf21b2">float</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">speed</span><span class="sf11b2">: </span><span class="sf21b2">float</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Download</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">byte</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">size</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">per</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">second</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">e</span><span class="sf11b2">.</span><span class="sf3b2">g</span><span class="sf11b2">., </span><span class="sf10b2">256KB</span><span class="sf11b2">/</span><span class="sf3b2">s</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">256</span><span class="sf11b2">&nbsp;* </span><span class="sf10b2">1024</span><span class="sf11b2">)</span><span class="sf3b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Download</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">byte</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">size</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">per</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">second</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">e</span><span class="sf11b2">.</span><span class="sf3b2">g</span><span class="sf11b2">., </span><span class="sf10b2">256KB</span><span class="sf11b2">/</span><span class="sf3b2">s</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">256</span><span class="sf11b2">&nbsp;* </span><span class="sf10b2">1024</span><span class="sf11b2">)</span><span class="sf3b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">use_cookies</span><span class="sf11b2">: </span><span class="sf3b2">bool</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">use_cookies</span><span class="sf11b2">: </span><span class="sf3b2">bool</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Flag</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">to</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">use</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cookies</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">True</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Flag</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">to</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">use</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cookies</span><span class="sf11b2">. </span><span class="sf3b2">Default</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">True</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">Returns</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">Returns</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; -------</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; -------</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">: </span><span class="sf3b2">str</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Output</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">filename</span><span class="sf11b2">.</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">Output</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">filename</span><span class="sf11b2">.</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf12b2">"""</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf12b2">"""</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url_origin</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">url_origin</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">requests</span><span class="sf11b2">.</span><span class="sf8b2">session</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">requests</span><span class="sf11b2">.</span><span class="sf8b2">session</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf9b2"># Load cookies</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf9b2"># Load cookies</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">cache_dir</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">home</span><span class="sf11b2">, </span><span class="sf12b2">".cache"</span><span class="sf11b2">, </span><span class="sf12b2">"gdown"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">cache_dir</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">home</span><span class="sf11b2">, </span><span class="sf12b2">".cache"</span><span class="sf11b2">, </span><span class="sf12b2">"gdown"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">makedirs</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">makedirs</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">cookies_file</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">, </span><span class="sf12b2">"cookies.json"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">cookies_file</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">cache_dir</span><span class="sf11b2">, </span><span class="sf12b2">"cookies.json"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">) </span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">use_cookies</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">) </span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">use_cookies</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">with</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">) </span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">f</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">with</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">) </span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">f</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cookies</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">json</span><span class="sf11b2">.</span><span class="sf8b2">load</span><span class="sf11b2">(</span><span class="sf3b2">f</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cookies</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">json</span><span class="sf11b2">.</span><span class="sf8b2">load</span><span class="sf11b2">(</span><span class="sf3b2">f</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cookies</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cookies</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">cookies</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">] = </span><span class="sf3b2">v</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">cookies</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">] = </span><span class="sf3b2">v</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">proxy</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">proxy</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">proxies</span><span class="sf11b2">&nbsp;= {</span><span class="sf12b2">"http"</span><span class="sf11b2">: </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf12b2">"https"</span><span class="sf11b2">: </span><span class="sf3b2">proxy</span><span class="sf11b2">}</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">proxies</span><span class="sf11b2">&nbsp;= {</span><span class="sf12b2">"http"</span><span class="sf11b2">: </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf12b2">"https"</span><span class="sf11b2">: </span><span class="sf3b2">proxy</span><span class="sf11b2">}</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Using proxy:"</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Using proxy:"</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">file_id</span><span class="sf11b2">, </span><span class="sf3b2">is_download_link</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">parse_url</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">file_id</span><span class="sf11b2">, </span><span class="sf3b2">is_download_link</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">parse_url</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">headers</span><span class="sf11b2">&nbsp;= {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">headers</span><span class="sf11b2">&nbsp;= {</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"User-Agent"</span><span class="sf11b2">: </span><span class="sf12b2">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36"</span><span class="sf11b2">&nbsp; </span><span class="sf9b2"># NOQA</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"User-Agent"</span><span class="sf11b2">: </span><span class="sf12b2">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36"</span><span class="sf11b2">&nbsp; </span><span class="sf9b2"># NOQA</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d1" href="#d1">.</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">while</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">True</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">while</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">True</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d2" href="#d2">.</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">res</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf8b2">get</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">, </span><span class="sf3b2">headers</span><span class="sf11b2">=</span><span class="sf3b2">headers</span><span class="sf11b2">, </span><span class="sf3b2">stream</span><span class="sf11b2">=</span><span class="sf20b2">True</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">res</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf8b2">get</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">, </span><span class="sf3b2">headers</span><span class="sf11b2">=</span><span class="sf3b2">headers</span><span class="sf11b2">, </span><span class="sf3b2">stream</span><span class="sf11b2">=</span><span class="sf20b2">True</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">requests</span><span class="sf11b2">.</span><span class="sf3b2">exceptions</span><span class="sf11b2">.</span><span class="sf3b2">ProxyError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">requests</span><span class="sf11b2">.</span><span class="sf3b2">exceptions</span><span class="sf11b2">.</span><span class="sf3b2">ProxyError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"An error has occurred using proxy:"</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"An error has occurred using proxy:"</span><span class="sf11b2">, </span><span class="sf3b2">proxy</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d3" href="#d3">.</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># Save cookies</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># Save cookies</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">with</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">, </span><span class="sf12b2">"w"</span><span class="sf11b2">) </span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">f</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">with</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">cookies_file</span><span class="sf11b2">, </span><span class="sf12b2">"w"</span><span class="sf11b2">) </span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">f</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cookies</span><span class="sf11b2">&nbsp;= [</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cookies</span><span class="sf11b2">&nbsp;= [</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">cookies</span><span class="sf11b2">.</span><span class="sf8b2">items</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">, </span><span class="sf3b2">v</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf3b2">cookies</span><span class="sf11b2">.</span><span class="sf8b2">items</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">.</span><span class="sf8b2">startswith</span><span class="sf11b2">(</span><span class="sf12b2">"download_warning_"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">.</span><span class="sf8b2">startswith</span><span class="sf11b2">(</span><span class="sf12b2">"download_warning_"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">json</span><span class="sf11b2">.</span><span class="sf8b2">dump</span><span class="sf11b2">(</span><span class="sf3b2">cookies</span><span class="sf11b2">, </span><span class="sf3b2">f</span><span class="sf11b2">, </span><span class="sf3b2">indent</span><span class="sf11b2">=</span><span class="sf10b2">2</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">json</span><span class="sf11b2">.</span><span class="sf8b2">dump</span><span class="sf11b2">(</span><span class="sf3b2">cookies</span><span class="sf11b2">, </span><span class="sf3b2">f</span><span class="sf11b2">, </span><span class="sf3b2">indent</span><span class="sf11b2">=</span><span class="sf10b2">2</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf12b2">"Content-Disposition"</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf12b2">"Content-Disposition"</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># This is the file</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># This is the file</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">file_id</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">is_download_link</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">file_id</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">is_download_link</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># Need to redirect with confirmation</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2"># Need to redirect with confirmation</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">get_url_from_gdrive_confirmation</span><span class="sf11b2">(</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">te<wbr>xt</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">get_url_from_gdrive_confirmation</span><span class="sf11b2">(</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">te<wbr>xt</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">RuntimeError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">RuntimeError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Access denied with the following error:"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Access denied with the following error:"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">"\n"</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">textwrap</span><span class="sf11b2">.</span><span class="sf8b2">wrap</span><span class="sf11b2">(</span><span class="sf8b2">str</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">)))</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf12b2">"\n"</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">textwrap</span><span class="sf11b2">.</span><span class="sf8b2">wrap</span><span class="sf11b2">(</span><span class="sf8b2">str</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">)))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">indent_func</span><span class="sf11b2">(</span><span class="sf3b2">error</span><span class="sf11b2">, </span><span class="sf12b2">"\t"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">error</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">indent_func</span><span class="sf11b2">(</span><span class="sf3b2">error</span><span class="sf11b2">, </span><span class="sf12b2">"\t"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">error</span><span class="sf11b2">, </span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">error</span><span class="sf11b2">, </span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"You may still be able to access the file from the browser:"</span><span class="sf11b2">,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"You may still be able to access the file from the browser:"</span><span class="sf11b2">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"\n\t"</span><span class="sf11b2">, </span><span class="sf3b2">url_origin</span><span class="sf11b2">, </span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"\n\t"</span><span class="sf11b2">, </span><span class="sf3b2">url_origin</span><span class="sf11b2">, </span><span class="sf12b2">"\n"</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">url</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Permission denied:"</span><span class="sf11b2">, </span><span class="sf3b2">url_origin</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf12b2">"Permission denied:"</span><span class="sf11b2">, </span><span class="sf3b2">url_origin</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"Maybe you need to change permission over "</span>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"Maybe you need to change permission over "</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"'Anyone with the link'?"</span><span class="sf11b2">,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf12b2">"'Anyone with the link'?"</span><span class="sf11b2">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">file_id</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">is_download_link</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">file_id</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">is_download_link</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'filename="(.*)"'</span><span class="sf11b2">, </span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">[</span><span class="sf12b2">"Content-Disposition"</span><span class="sf11b2">])</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">m</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">re</span><span class="sf11b2">.</span><span class="sf8b2">search</span><span class="sf11b2">(</span><span class="sf12b2">'filename="(.*)"'</span><span class="sf11b2">, </span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">[</span><span class="sf12b2">"Content-Disposition"</span><span class="sf11b2">])</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">m</span><span class="sf11b2">.</span><span class="sf8b2">groups</span><span class="sf11b2">()[</span><span class="sf10b2">0</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">basename</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">basename</span><span class="sf11b2">(</span><span class="sf3b2">url</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">filename_from_url</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">filename_from_url</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output_is_path</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">isinstance</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">, </span><span class="sf3b2">six</span><span class="sf11b2">.</span><span class="sf3b2">string_types</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">output_is_path</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">isinstance</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">, </span><span class="sf3b2">six</span><span class="sf11b2">.</span><span class="sf3b2">string_types</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output_is_path</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">.</span><span class="sf8b2">endswith</span><span class="sf11b2">(</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf3b2">sep</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output_is_path</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">and</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output</span><span class="sf11b2">.</span><span class="sf8b2">endswith</span><span class="sf11b2">(</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf3b2">sep</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">):</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">exists</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">):</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">makedirs</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">makedirs</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">, </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">output</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">join</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">, </span><span class="sf3b2">filename_from_url</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d4" href="#d4">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">print</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b16">Downloading...</span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">,</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">file</span><span style="color: #000000; background-color: #efcb05; ">=</span><span style="color: #000000; background-color: #efcb05; ">sys</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">stderr</span><span style="color: #000000; background-color: #efcb05; ">)</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">print</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b16"></span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">,</span><span style="color: #000000; background-color: #efcb05; ">file</span><span style="color: #000000; background-color: #efcb05; ">=</span><span style="color: #000000; background-color: #efcb05; ">sys</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">st<wbr>derr</span><span style="color: #000000; background-color: #efcb05; ">)</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; print("From:", url_origin, file=sys.stderr)</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; print(</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "To:",</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; osp.abspath(output) if output_is_path else output,</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; file=sys.stderr,</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; )</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output_is_path</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">output_is_path</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">tmp_file</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">tempfile</span><span class="sf11b2">.</span><span class="sf8b2">mktemp</span><span class="sf11b2">(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">tmp_file</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">tempfile</span><span class="sf11b2">.</span><span class="sf8b2">mktemp</span><span class="sf11b2">(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">suffix</span><span class="sf11b2">=</span><span class="sf3b2">tempfile</span><span class="sf11b2">.</span><span class="sf3b2">template</span><span class="sf11b2">,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">suffix</span><span class="sf11b2">=</span><span class="sf3b2">tempfile</span><span class="sf11b2">.</span><span class="sf3b2">template</span><span class="sf11b2">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">prefix</span><span class="sf11b2">=</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">basename</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">),</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">prefix</span><span class="sf11b2">=</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">basename</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">),</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">dir</span><span class="sf11b2">=</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">dirname</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">),</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">dir</span><span class="sf11b2">=</span><span class="sf3b2">osp</span><span class="sf11b2">.</span><span class="sf8b2">dirname</span><span class="sf11b2">(</span><span class="sf3b2">output</span><span class="sf11b2">),</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">, </span><span class="sf12b2">"wb"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">&nbsp;= </span><span class="sf8b2">open</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">, </span><span class="sf12b2">"wb"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">else</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">tmp_file</span><span class="sf11b2">&nbsp;= </span><span class="sf20b2">None</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">tmp_file</span><span class="sf11b2">&nbsp;= </span><span class="sf20b2">None</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">output</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">output</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">.</span><span class="sf8b2">get</span><span class="sf11b2">(</span><span class="sf12b2">"Content-Length"</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf3b2">headers</span><span class="sf11b2">.</span><span class="sf8b2">get</span><span class="sf11b2">(</span><span class="sf12b2">"Content-Length"</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;= </span><span class="sf21b2">int</span><span class="sf11b2">(</span><span class="sf3b2">total</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">total</span><span class="sf11b2">&nbsp;= </span><span class="sf21b2">int</span><span class="sf11b2">(</span><span class="sf3b2">total</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">tqdm</span><span class="sf11b2">.</span><span class="sf8b2">tqdm</span><span class="sf11b2">(</span><span class="sf3b2">total</span><span class="sf11b2">=</span><span class="sf3b2">total</span><span class="sf11b2">, </span><span class="sf3b2">unit</span><span class="sf11b2">=</span><span class="sf12b2">"B"</span><span class="sf11b2">, </span><span class="sf3b2">unit_scale</span><span class="sf11b2">=</span><span class="sf20b2">True</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">tqdm</span><span class="sf11b2">.</span><span class="sf8b2">tqdm</span><span class="sf11b2">(</span><span class="sf3b2">total</span><span class="sf11b2">=</span><span class="sf3b2">total</span><span class="sf11b2">, </span><span class="sf3b2">unit</span><span class="sf11b2">=</span><span class="sf12b2">"B"</span><span class="sf11b2">, </span><span class="sf3b2">unit_scale</span><span class="sf11b2">=</span><span class="sf20b2">True</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">t_start</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">time</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">t_start</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">time</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">chunk</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf8b2">iter_content</span><span class="sf11b2">(</span><span class="sf3b2">chunk_size</span><span class="sf11b2">=</span><span class="sf3b2">CHUNK_SIZE</span><span class="sf11b2">)<wbr>:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">chunk</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">in</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">res</span><span class="sf11b2">.</span><span class="sf8b2">iter_content</span><span class="sf11b2">(</span><span class="sf3b2">chunk_size</span><span class="sf11b2">=</span><span class="sf3b2">CHUNK_SIZE</span><span class="sf11b2">)<wbr>:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">.</span><span class="sf8b2">write</span><span class="sf11b2">(</span><span class="sf3b2">chunk</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">.</span><span class="sf8b2">write</span><span class="sf11b2">(</span><span class="sf3b2">chunk</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf8b2">update</span><span class="sf11b2">(</span><span class="sf21b2">len</span><span class="sf11b2">(</span><span class="sf3b2">chunk</span><span class="sf11b2">))</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf8b2">update</span><span class="sf11b2">(</span><span class="sf21b2">len</span><span class="sf11b2">(</span><span class="sf3b2">chunk</span><span class="sf11b2">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">speed</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">speed</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">is</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">None</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">1.0</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf3b2">n</span><span class="sf11b2">&nbsp;/ </span><span class="sf3b2">speed</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">1.0</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf3b2">n</span><span class="sf11b2">&nbsp;/ </span><span class="sf3b2">speed</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">elapsed_time</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">time</span><span class="sf11b2">() - </span><span class="sf3b2">t_start</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">elapsed_time</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">time</span><span class="sf11b2">() - </span><span class="sf3b2">t_start</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">elapsed_time</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">elapsed_time</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">sleep</span><span class="sf11b2">(</span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">elapsed_time</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">time</span><span class="sf11b2">.</span><span class="sf8b2">sleep</span><span class="sf11b2">(</span><span class="sf3b2">elapsed_time_expected</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">elapsed_time</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">not</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">quiet</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pbar</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tmp_file</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tmp_file</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">f</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">shutil</span><span class="sf11b2">.</span><span class="sf8b2">move</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">, </span><span class="sf3b2">output</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">shutil</span><span class="sf11b2">.</span><span class="sf8b2">move</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">, </span><span class="sf3b2">output</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">IOError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf20b2">IOError</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">as</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">e</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">print</span><span class="sf11b2">(</span><span class="sf3b2">e</span><span class="sf11b2">, </span><span class="sf3b2">file</span><span class="sf11b2">=</span><span class="sf3b2">sys</span><span class="sf11b2">.</span><span class="sf20b2">stderr</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">finally</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">finally</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">sess</span><span class="sf11b2">.</span><span class="sf8b2">close</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">try</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tmp_file</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">tmp_file</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">remove</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">os</span><span class="sf11b2">.</span><span class="sf8b2">remove</span><span class="sf11b2">(</span><span class="sf3b2">tmp_file</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">OSError</span><span class="sf11b2">:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">except</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">OSError</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">pass</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">pass</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d5" href="#d5">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">return</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">output</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">return</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">output</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
</tbody>
</table>
</body>
</html>
